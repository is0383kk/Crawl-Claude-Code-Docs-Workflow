# セキュリティ

> Claude Codeのセキュリティ対策と安全な使用方法のベストプラクティスについて学びます。

## セキュリティへのアプローチ方法

### セキュリティの基盤

コードのセキュリティは最優先事項です。Claude Codeはセキュリティを中核に据えて構築されており、Anthropicの包括的なセキュリティプログラムに従って開発されています。詳細情報とリソース（SOC 2 Type 2レポート、ISO 27001証明書など）については、[Anthropic Trust Center](https://trust.anthropic.com)をご覧ください。

### パーミッションベースのアーキテクチャ

Claude Codeはデフォルトで厳密な読み取り専用パーミッションを使用します。追加のアクション（ファイルの編集、テストの実行、コマンドの実行）が必要な場合、Claude Codeは明示的なパーミッションをリクエストします。ユーザーは、アクションを1回だけ承認するか、自動的に許可するかを制御できます。

Claude Codeは透明性とセキュリティを備えるように設計されています。例えば、bashコマンドを実行する前に承認が必要であり、直接制御できます。このアプローチにより、ユーザーと組織はパーミッションを直接設定できます。

詳細なパーミッション設定については、[Identity and Access Management](/ja/iam)を参照してください。

### 組み込み保護

エージェントシステムのリスクを軽減するために：

* **サンドボックス化されたbashツール**: [Sandbox](/ja/sandboxing)でbashコマンドをファイルシステムとネットワークの分離により実行し、パーミッションプロンプトを減らしながらセキュリティを維持します。`/sandbox`で有効にして、Claude Codeが自律的に作業できる境界を定義します
* **書き込みアクセス制限**: Claude Codeは開始されたフォルダとそのサブフォルダにのみ書き込みでき、明示的なパーミッションなしに親ディレクトリのファイルを変更することはできません。Claude Codeは作業ディレクトリ外のファイルを読み取ることができます（システムライブラリと依存関係へのアクセスに便利です）が、書き込み操作はプロジェクトスコープに厳密に限定され、明確なセキュリティ境界を作成します
* **プロンプト疲労の軽減**: ユーザーごと、コードベースごと、または組織ごとに頻繁に使用される安全なコマンドをホワイトリストに登録するサポート
* **Accept Editsモード**: 複数の編集をバッチで受け入れながら、副作用のあるコマンドのパーミッションプロンプトを維持します

### ユーザーの責任

Claude Codeは、ユーザーが付与したパーミッションのみを持ちます。承認前に、提案されたコードとコマンドの安全性を確認する責任があります。

## プロンプトインジェクションから保護する

プロンプトインジェクションは、攻撃者がAIアシスタントの指示を悪意のあるテキストを挿入することでオーバーライドまたは操作しようとする技術です。Claude Codeにはこれらの攻撃に対する複数のセーフガードが含まれています：

### コア保護

* **パーミッションシステム**: 機密操作には明示的な承認が必要です
* **コンテキスト認識分析**: 完全なリクエストを分析して潜在的に有害な指示を検出します
* **入力サニタイゼーション**: ユーザー入力を処理することでコマンドインジェクションを防止します
* **コマンドブロックリスト**: `curl`や`wget`などのWebから任意のコンテンツを取得するリスクのあるコマンドをデフォルトでブロックします。明示的に許可する場合は、[パーミッションパターンの制限](/ja/iam#tool-specific-permission-rules)に注意してください

### プライバシーセーフガード

データを保護するために、以下を含む複数のセーフガードを実装しています：

* 機密情報の保持期間の制限（詳細については[Privacy Center](https://privacy.anthropic.com/en/articles/10023548-how-long-do-you-store-my-data)を参照してください）
* ユーザーセッションデータへのアクセス制限
* データトレーニング設定に対するユーザー制御。コンシューマーユーザーは[プライバシー設定](https://claude.ai/settings/privacy)をいつでも変更できます。

詳細については、[Commercial Terms of Service](https://www.anthropic.com/legal/commercial-terms)（Team、Enterprise、APIユーザー向け）または[Consumer Terms](https://www.anthropic.com/legal/consumer-terms)（Free、Pro、Maxユーザー向け）および[Privacy Policy](https://www.anthropic.com/legal/privacy)をご確認ください。

### 追加のセーフガード

* **ネットワークリクエスト承認**: ネットワークリクエストを行うツールはデフォルトでユーザー承認が必要です
* **分離されたコンテキストウィンドウ**: Webフェッチは潜在的に悪意のあるプロンプトの注入を避けるために別のコンテキストウィンドウを使用します
* **信頼検証**: 初回のコードベース実行と新しいMCPサーバーには信頼検証が必要です
  * 注：`-p`フラグで非対話的に実行する場合、信頼検証は無効になります
* **コマンドインジェクション検出**: 疑わしいbashコマンドは、以前にホワイトリストに登録されていても手動承認が必要です
* **フェイルクローズドマッチング**: マッチしないコマンドはデフォルトで手動承認が必要です
* **自然言語説明**: 複雑なbashコマンドにはユーザーの理解のための説明が含まれます
* **安全な認証情報ストレージ**: APIキーとトークンは暗号化されます。[Credential Management](/ja/iam#credential-management)を参照してください

<Warning>
  **Windows WebDAVセキュリティリスク**: Windows上でClaude Codeを実行する場合、WebDAVを有効にするか、Claude Codeが`\\*`などのWebDAVサブディレクトリを含む可能性のあるパスにアクセスすることを許可しないことをお勧めします。[WebDAVはMicrosoftによって非推奨になっています](https://learn.microsoft.com/en-us/windows/whats-new/deprecated-features#:~:text=The%20Webclient%20\(WebDAV\)%20service%20is%20deprecated)セキュリティリスクのため。WebDAVを有効にすると、Claude Codeがリモートホストへのネットワークリクエストをトリガーし、パーミッションシステムをバイパスする可能性があります。
</Warning>

**信頼できないコンテンツを使用する場合のベストプラクティス**：

1. 承認前に提案されたコマンドを確認します
2. 信頼できないコンテンツをClaude Codeに直接パイプすることを避けます
3. 重要なファイルへの提案された変更を確認します
4. 仮想マシン（VM）を使用してスクリプトを実行し、ツール呼び出しを行います。特に外部Webサービスと相互作用する場合
5. `/bug`で疑わしい動作を報告します

<Warning>
  これらの保護は大幅にリスクを軽減しますが、どのシステムもすべての攻撃に完全に免疫があるわけではありません。AIツールを使用する場合は常に良好なセキュリティプラクティスを維持してください。
</Warning>

## MCPセキュリティ

Claude Codeにより、ユーザーはModel Context Protocol（MCP）サーバーを設定できます。許可されたMCPサーバーのリストはソースコードで設定され、Claude Code設定エンジニアがソース管理にチェックインします。

独自のMCPサーバーを作成するか、信頼できるプロバイダーからのMCPサーバーを使用することをお勧めします。Claude CodeのMCPサーバーのパーミッションを設定できます。AnthropicはいかなるMCPサーバーも管理または監査しません。

## IDEセキュリティ

IDEでClaude Codeを実行するセキュリティの詳細については、[こちら](/ja/vs-code#security)を参照してください。

## クラウド実行セキュリティ

[Claude Code on the web](/ja/claude-code-on-the-web)を使用する場合、追加のセキュリティ制御が実施されます：

* **分離された仮想マシン**: 各クラウドセッションはAnthropicが管理する分離されたVMで実行されます
* **ネットワークアクセス制御**: ネットワークアクセスはデフォルトで制限され、無効にするか特定のドメインのみを許可するように設定できます
* **認証情報保護**: 認証はサンドボックス内でスコープされた認証情報を使用するセキュアプロキシを通じて処理され、その後実際のGitHub認証トークンに変換されます
* **ブランチ制限**: Gitプッシュ操作は現在のワーキングブランチに制限されます
* **監査ログ**: クラウド環境内のすべての操作はコンプライアンスと監査目的でログに記録されます
* **自動クリーンアップ**: クラウド環境はセッション完了後に自動的に終了されます

クラウド実行の詳細については、[Claude Code on the web](/ja/claude-code-on-the-web)を参照してください。

## セキュリティベストプラクティス

### 機密コードの使用

* 承認前にすべての提案された変更を確認します
* 機密リポジトリにはプロジェクト固有のパーミッション設定を使用します
* 追加の分離のために[devcontainers](/ja/devcontainer)の使用を検討します
* `/permissions`でパーミッション設定を定期的に監査します

### チームセキュリティ

* [enterprise managed policies](/ja/iam#enterprise-managed-policy-settings)を使用して組織標準を実施します
* 承認されたパーミッション設定をバージョン管理を通じて共有します
* チームメンバーにセキュリティベストプラクティスについてトレーニングを行います
* [OpenTelemetry metrics](/ja/monitoring-usage)を通じてClaude Codeの使用状況を監視します

### セキュリティ問題の報告

Claude Codeでセキュリティ脆弱性を発見した場合：

1. 公開で開示しないでください
2. [HackerOne program](https://hackerone.com/anthropic-vdp/reports/new?type=team\&report_type=vulnerability)を通じて報告してください
3. 詳細な再現手順を含めてください
4. 公開開示前に問題に対処する時間を与えてください

## 関連リソース

* [Sandboxing](/ja/sandboxing) - bashコマンドのファイルシステムとネットワーク分離
* [Identity and Access Management](/ja/iam) - パーミッションとアクセス制御を設定します
* [Monitoring usage](/ja/monitoring-usage) - Claude Codeアクティビティを追跡および監査します
* [Development containers](/ja/devcontainer) - セキュアで分離された環境
* [Anthropic Trust Center](https://trust.anthropic.com) - セキュリティ認証とコンプライアンス
