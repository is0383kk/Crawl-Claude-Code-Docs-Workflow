# Claudeのメモリを管理する

> 異なるメモリロケーションとベストプラクティスを使用して、セッション間でClaude Codeのメモリを管理する方法を学びます。

Claude Codeは、スタイルガイドラインやワークフロー内の一般的なコマンドなど、セッション間であなたの設定を記憶することができます。

## メモリタイプを決定する

Claude Codeは階層構造の4つのメモリロケーションを提供し、それぞれが異なる目的を果たします：

| メモリタイプ              | ロケーション                                                                                                                                                  | 目的                        | ユースケースの例                          | 共有対象              |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------- | --------------------------------- | ----------------- |
| **エンタープライズポリシー**    | macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`<br />Linux: `/etc/claude-code/CLAUDE.md`<br />Windows: `C:\ProgramData\ClaudeCode\CLAUDE.md` | IT/DevOpsによって管理される組織全体の指示 | 企業のコーディング標準、セキュリティポリシー、コンプライアンス要件 | 組織内のすべてのユーザー      |
| **プロジェクトメモリ**       | `./CLAUDE.md` または `./.claude/CLAUDE.md`                                                                                                                 | プロジェクトのチーム共有指示            | プロジェクトアーキテクチャ、コーディング標準、一般的なワークフロー | ソース管理を通じたチームメンバー  |
| **ユーザーメモリ**         | `~/.claude/CLAUDE.md`                                                                                                                                   | すべてのプロジェクトの個人設定           | コードスタイルの設定、個人的なツーリングショートカット       | あなただけ（すべてのプロジェクト） |
| **プロジェクトメモリ（ローカル）** | `./CLAUDE.local.md`                                                                                                                                     | 個人的なプロジェクト固有の設定           | *（非推奨、下記参照）* サンドボックスURL、推奨テストデータ  | あなただけ（現在のプロジェクト）  |

すべてのメモリファイルは、Claude Codeが起動されるときに自動的にコンテキストに読み込まれます。階層内で上位のファイルが優先され、最初に読み込まれ、より具体的なメモリが構築される基盤を提供します。

## CLAUDE.mdインポート

CLAUDE.mdファイルは、`@path/to/import`構文を使用して追加ファイルをインポートできます。次の例は3つのファイルをインポートしています：

```
See @README for project overview and @package.json for available npm commands for this project.

# Additional Instructions
- git workflow @docs/git-instructions.md
```

相対パスと絶対パスの両方が許可されています。特に、ユーザーのホームディレクトリ内のファイルをインポートすることは、チームメンバーがリポジトリにチェックインされていない個別の指示を提供するための便利な方法です。以前はCLAUDE.local.mdが同様の目的を果たしていましたが、複数のgitワークツリー間でより良く機能するため、現在はインポートの利点により非推奨になっています。

```
# Individual Preferences
- @~/.claude/my-project-instructions.md
```

潜在的な衝突を避けるために、インポートはマークダウンコードスパンおよびコードブロック内では評価されません。

```
This code span will not be treated as an import: `@anthropic-ai/claude-code`
```

インポートされたファイルは追加ファイルを再帰的にインポートでき、最大深度は5ホップです。`/memory`コマンドを実行することで、どのメモリファイルが読み込まれているかを確認できます。

## Claudeがメモリをどのように検索するか

Claude Codeはメモリを再帰的に読み込みます：現在の作業ディレクトリから開始して、Claude Codeはルートディレクトリ\_/\_まで（ただし含まない）再帰し、見つかったCLAUDE.mdまたはCLAUDE.local.mdファイルを読み込みます。これは、\_foo/bar/\_でClaude Codeを実行し、\_foo/CLAUDE.md\_と\_foo/bar/CLAUDE.md\_の両方にメモリがある大規模なリポジトリで作業する場合に特に便利です。

Claudeは現在の作業ディレクトリの下のサブツリーにネストされたCLAUDE.mdも検出します。起動時に読み込まれるのではなく、Claudeがそれらのサブツリー内のファイルを読み込むときにのみ含まれます。

## `/memory`でメモリを直接編集する

セッション中に`/memory`スラッシュコマンドを使用して、システムエディタでメモリファイルを開き、より広範な追加または整理を行います。

## プロジェクトメモリを設定する

重要なプロジェクト情報、規約、および頻繁に使用されるコマンドを保存するためにCLAUDE.mdファイルを設定したいとします。プロジェクトメモリは`./CLAUDE.md`または`./.claude/CLAUDE.md`に保存できます。

次のコマンドでコードベースのCLAUDE.mdをブートストラップします：

```
> /init 
```

<Tip>
  ヒント：

  * 繰り返しの検索を避けるために、頻繁に使用されるコマンド（ビルド、テスト、リント）を含めます
  * コードスタイルの設定と命名規則を文書化します
  * プロジェクトに固有の重要なアーキテクチャパターンを追加します
  * CLAUDE.mdメモリは、チームと共有される指示と個人の設定の両方に使用できます。
</Tip>

## 組織レベルのメモリ管理

エンタープライズ組織は、すべてのユーザーに適用される中央管理されたCLAUDE.mdファイルをデプロイできます。

組織レベルのメモリ管理を設定するには：

1. オペレーティングシステムに適切な場所にエンタープライズメモリファイルを作成します：

* macOS: `/Library/Application Support/ClaudeCode/CLAUDE.md`
* Linux/WSL: `/etc/claude-code/CLAUDE.md`
* Windows: `C:\ProgramData\ClaudeCode\CLAUDE.md`

2. 構成管理システム（MDM、グループポリシー、Ansibleなど）を通じてデプロイして、すべての開発者マシン間での一貫した配布を確保します。

## メモリのベストプラクティス

* **具体的にする**：「コードを適切にフォーマットする」よりも「2スペースのインデントを使用する」の方が良いです。
* **構造を使用して整理する**：各個別のメモリを箇条書きとしてフォーマットし、関連するメモリを説明的なマークダウン見出しの下にグループ化します。
* **定期的に確認する**：プロジェクトが進化するにつれてメモリを更新して、Claudeが常に最新の情報とコンテキストを使用していることを確認します。


---

> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt